<app-vehicles-header  *ngIf="getRole() === 'Policeman'" ></app-vehicles-header>

<div  *ngIf="getRole() === 'Policeman'" class="title">
  <h1>Kreiraj vozacku dozvolu</h1>
</div>
<div  *ngIf="getRole() === 'Policeman'" class="app-form">
    <form (ngSubmit)="onSubmit()" [formGroup]="driverLicenceForm">
        <div class="app-form-group">
      <label for="vehicle_driver">JMBG vozaca</label>
      <input
        type="text"
        id="vehicle_driver"
        formControlName="vehicle_driver"
        class="app-form-control"
        required
      />
      <div *ngIf="driverLicenceForm.controls['vehicle_driver'].invalid && driverLicenceForm.controls['vehicle_driver'].touched" class="text-danger">
        <div *ngIf="driverLicenceForm.controls['vehicle_driver'].errors?.['required']">JMBG vozaca je obavezan.</div>
      </div>
    </div>

    <!-- <div class="app-form-group">
        <label for="licence_number">Broj vozacke dozvole</label>
        <input
          type="text"
          id="licence_number"
          formControlName="licence_number"
          class="app-form-control"
          required
        />
        <div *ngIf="driverLicenceForm.controls['licence_number'].invalid && driverLicenceForm.controls['licence_number'].touched" class="text-danger">
          <div *ngIf="driverLicenceForm.controls['licence_number'].errors?.['licence_number']">Broj vozacke dozvole je obavezan.</div>
        </div>
      </div> -->

    <div class="app-form-row">
      <div class="app-form-group">
        <label for="location_licenced">Mesto izdavanja</label>
        <select
          class="app-form-control"
          formControlName="location_licenced"
          required
          id="location_licenced"
        >
          <option value="" disabled>Mesto izdavanja </option>
          <option *ngFor="let location of locations" [value]="location">
            {{ location }}
          </option>
        </select>
        <div *ngIf="driverLicenceForm.controls['location_licenced'].invalid && driverLicenceForm.controls['location_licenced'].touched" class="text-danger">
          Mesto izdavanja je obavezno.
        </div>
      </div>

      <div class="app-form-group">
        <label for="categories">Kategorije</label>
        <select
          multiple
          class="app-form-control"
          formControlName="categories"
          id="categories"
        >
          <option *ngFor="let category of categories" [value]="category">
            {{ category }}
          </option>
        </select>
        <div *ngIf="driverLicenceForm.controls['categories'].invalid && driverLicenceForm.controls['categories'].touched" class="text-danger">
          Kategorije su obavezne.
        </div>
      </div>
    </div>

    <div class="app-form-group buttons">
        <button type="button" class="app-form-button" (click)="onCancel()">
          ODUSTANI
        </button>
        <button type="submit" class="app-form-button">KREIRAJ</button>

        <div *ngIf="backendError" class="text-danger">
          {{ backendError }}
        </div>
      </div>
  </form>
</div>



<h1 id="lista" class="title">LISTA SVIH VOZACKIH DOZVOLA</h1>

<div *ngIf="getRole() === 'Policeman'" class="search-vehicles">
  <h3>Pretraži vozacke dozvole po ID-ju:</h3>
  <input type="text" class="searchPlate" [(ngModel)]="searchIDByLicence">
  <span class="searchSpan">
    <button type="button" class="search-btn" (click)="searchDriverLicencesByID()">Pretraži</button>
    <button type="button" class="search-btn-refresh" (click)="loadAllDriverLicences()">Osveži</button>
  </span>
</div>

<div *ngIf="getRole() === 'TrafficPoliceman' || getRole() === 'Policeman'" class="search-vehicles">
  <h3>Pretraži vozacke dozvole po JMBG-u:</h3>
  <input type="text" class="searchPlate" [(ngModel)]="searchIDByDriver">
  <span class="searchSpan">
    <button type="button" class="search-btn" (click)="searchDriverLicencesByDriver()">Pretraži</button>
    <button type="button" class="search-btn-refresh" (click)="loadAllDriverLicences()">Osveži</button>
  </span>
</div>

 <div *ngIf="getRole() === 'TrafficPoliceman' || getRole() === 'Policeman'"   class="parent-div">
    <div *ngFor="let driverLicence of driverLicences" class="app-form">
        <br>
          <div class="app-form-group">
            <label for="vehicle_driver">JMBG vozaca</label>
            <input
            type="text"
            [value]="driverLicence.vehicle_driver"
            class="app-form-control"
            disabled
          />
          </div>

          <div class="app-form-row">
            <div class="app-form-group">
              <label for="name"> Mesto izdavanja</label>
              <input
              type="text"
              [value]="driverLicence.location_licenced"
              class="app-form-control"
              disabled
            />

            </div>


             <div class="app-form-group">
              <label for="licence_number">Broj dozvole</label>
              <input
              type="text"
              [value]="driverLicence.licence_number"
              class="app-form-control"
              disabled
            />

            </div>
            <div class="app-form-group">
              <label for="categories">Kategorije</label>
              <div>
                <span *ngFor="let category of driverLicence.categories; let isLast = last">
                  {{ category }}<span *ngIf="!isLast">, </span>
                </span>
              </div>
          </div>
        </div>
    </div>
 </div>
